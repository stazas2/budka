<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'"> -->
    <title>Фотобудка</title>
    <!-- Подключаем шрифт Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
    <script src="./script.js" defer></script>
  </head>
  <body>
    <div id="fullscreen-toggle"></div>

    <!-- Э ЗАСТАВКИ -->
    <div id="splash-screen" class="screen active">
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <button id="start-button"></button>
      <!-- Текст кнопки будет установлен из config.json -->
      <!-- Кнопка переключения темы -->
      <label class="theme-switcher">
        <input type="checkbox" id="theme-switcher" />
        <span class="slider"></span>
      </label>
    </div>


    <!-- Э ПОЛОВ -->
    <div id="gender-screen" class="screen">
      <button class="back-button">Назад</button>
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <div id="gender-buttons">
        <div class="button-row">
          <div class="button-row_block">
            <div class="button-row_item">
              <img
                src="C:/MosPhotoBooth2/gender/man.png"
                class="invert-image"
                alt="Мужчина"
              />
              <div class="button" data-gender="man">Мужчина</div>
            </div>
            <div class="button-row_item">
              <img
                src="C:/MosPhotoBooth2/gender/woman.png"
                class="invert-image"
                alt="Женщина"
              />
              <div class="button" data-gender="woman">Женщина</div>
            </div>
          </div>
          <div class="button-row_block">
            <div class="button-row_item">
              <img
                src="C:/MosPhotoBooth2/gender/boy.png"
                class="invert-image"
                alt="Мальчик"
              />
              <div class="button" data-gender="boy">Мальчик</div>
            </div>
            <div class="button-row_item">
              <img
                src="C:/MosPhotoBooth2/gender/girl.png"
                class="invert-image"
                alt="Девочка"
              />
              <div class="button" data-gender="girl">Девочка</div>
            </div>
          </div>
          <div class="button-row_item button-row_item-last">
            <img
              src="C:/MosPhotoBooth2/gender/group.png"
              class="invert-image"
              alt="Групповое фото"
            />
            <div class="button" data-gender="group">Групповое фото</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Э СТИЛЕЙ -->
    <div id="style-screen" class="screen">
      <button class="back-button">Назад</button>
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <div id="style-buttons">
        <!-- Кнопки стилей будут добавлены динамически -->
      </div>
    </div>

    <!-- Э КАМЕРЫ -->
    <div id="camera-screen" class="screen">
      <button class="back-button" disabled>Назад</button>
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <div class="video-container">
        <!-- Добавляем загрузчик -->
        <div id="camera-loader">
          <div class="loader-spinner"></div>
          <div class="loader-text">Инициализация камеры...</div>
        </div>
        <video id="video" autoplay muted playsinline></video>
        <div id="countdown"></div>
      </div>
    </div>

    <!-- Э ЗАГРУЗКИ ФОТО -->
    <div id="processing-screen" class="screen">
      <button class="back-button" disabled>Назад</button>
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <div id="progress-bar">
        <div id="progress-bar-fill"></div>
      </div>
      <div id="progress-percentage">0%</div>
    </div>

    <!-- Э РЕЗУЛЬТАТА -->
    <div id="result-screen" class="screen">
      <h1></h1>
      <!-- Заголовок будет установлен из config.json -->
      <div class="content-container">
        <img id="result-image" alt="Обработанное изображение" />
        <div id="selected-params" class="selected-params">
          <div id="selected-params-text"></div>
        </div>
      </div>
      <div class="buttons-container">
        <button id="print-photo">Печать фото</button>
        <button id="start-over">Начать заново</button>
      </div>
    </div>

    <button id="language-switcher">KK</button>

    <!-- Скрытый canvas для захвата изображения -->
    <canvas
      id="canvas"
      width="1280"
      height="720"
      style="display: none"
    ></canvas>
  </body>
</html>
